<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    {% if password != "iamtheadmin" %}
        <h1>Verify Admin</h1>

        <h5>Enter admin authentication password</h5>
        <div class="main" style = "margin:auto; width:80%;">
            <form action="" method="POST">
                <label for="inputPassword5" class="form-label">Password</label>
                <input type="password" name = "password" id="inputPassword5" class="form-control" placeholder = "Admin Authentication Password" aria-describedby="passwordHelpBlock">

                <div class = "button" style = "padding-top: 10px; padding-bottom:10px">
                    <button class="btn btn-primary" name = "submit" type="submit">Submit form</button>
                </div>
                <p><a href = "/"><button type="button" class="btn btn-outline-primary">Go to Welcome Page </button></a></p>


            </form>
        </div>
    {% else %}
    <div class="card">
        <div class="card-body">
            <h1>Admin Logged in</h1>
            <p>Note: You need to login after any action taken</p>
            <p><a href = "/"><button type="button" class="btn btn-outline-primary">Go to Welcome Page </button></a></p>
        </div>
      </div>
      
   
    <h1>All Complaints:</h1>
    <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Hostel Name</th>
            <th scope="col">Category</th>
            <th scope="col">Name of the Person</th>
            <th scope="col">Availability</th>
            <th scope="col">Room Number</th>
            <th scope="col">Phone Number</th>
            <th scope="col">Description</th>
            <th scope="col">Escalation Level</th>
            <th scope="col">Accept</th>
            <th scope="col">Reject</th>
            <th scope="col">Escalate</th>

          </tr>
        </thead>
        <tbody class="table-group-divider">
        {% for complaint in allcomplaints %}
          <tr>
            <th scope="row">{{ loop.index }}</th>
            <td>{{complaint.hostelName}}</td>
            <td>{{complaint.category}}</td>
            <td>{{complaint.name}}</td>
            <td>{{complaint.availability}}</td>
            <td>{{complaint.room_no}}</td>
            <td>{{complaint.phone_no}}</td>
            <td>{{complaint.description}}</td>
            {% if complaint.extra != "-"%}
                <td>{{complaint.extra}}</td>
            {% else %}
                <td>Level 1</td>
            {% endif %}
            <td><a href = "/verifyadmin/accept/{{complaint.id}}"><button type="button" class="btn btn-outline-success">Accept</button></a></td>
            <td><a href = "/verifyadmin/reject/{{complaint.id}}"><button type="button" class="btn btn-outline-danger">Reject</button></a></td>
            <td><a href = "/verifyadmin/escalate/{{complaint.id}}"><button type="button" class="btn btn-outline-warning">Escalate</button></a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
</body>
</html>